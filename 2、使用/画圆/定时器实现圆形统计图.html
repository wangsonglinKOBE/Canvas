<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>圆形统计图</title>
  <style>
    canvas {
      display: block;
      margin: 0 auto;
      border: 1px solid black;
    }
  </style>
</head>

<body>
  <canvas id="cont" width="500px" height="500px">您的浏览器版本过低，请升级浏览器或者使用chrome打开！</canvas>


  <script>
    const canvas = document.querySelector('#cont');
    const ctx = canvas.getContext('2d');

    const deg = Math.PI * 2 / 360;
    let count = 0;

    // const timer = setInterval(() => {
    //   count++;
    //   ctx.beginPath();
    //   ctx.arc(250, 250, 200, 0, deg * count, false);
    //   // ctx.arc(250, 250, 200, -Math.PI / 2, deg * count - Math.PI / 2, false);
    //   ctx.lineWidth = 5;
    //   ctx.strokeStyle = '#f00';
    //   ctx.stroke();
    //   if (count === 360) {
    //     clearInterval(timer);
    //   }
    // }, 5);

    function runTimer() {
      count++;
      ctx.beginPath();
      ctx.arc(250, 250, 200, 0, deg * count, false);
      ctx.lineWidth = 5;
      ctx.strokeStyle = '#f00';
      ctx.stroke();

    }

    (function animateloop() {
      runTimer();
      let loops = requestAnimationFrame(animateloop);

      if (count === 360) {
        cancelAnimationFrame(loops)
      }
    })()

    console.log('count', count);


    // 封装画圆的方法
    // function drawCircle(x, y, r, width, flag, color) {
    //   ctx.beginPath();
    //   ctx.arc(x, y, r, -Math.PI/2, Math.PI/2, flag);
    //   ctx.lineWidth = width;
    //   ctx.strokeStyle = color || '#000';
    //   ctx.stroke();
    // }

    // drawCircle(250, 250, 100, false)
    
  </script>
</body>

</html>